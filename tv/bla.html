<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script>
            var wsUri = 'ws://localhost:1337';
            var output;

            function init()
            {
                output = document.getElementById('output');
                testWebSocket();
            }

            function testWebSocket()
            {
                websocket = new WebSocket(wsUri);
                websocket.onopen = function(evt) { onOpen(evt) };
                websocket.onclose = function(evt) { onClose(evt) };
                websocket.onmessage = function(evt) { onMessage(evt) };
                websocket.onerror = function(evt) { onError(evt) };
            }

            function onOpen(evt)
            {
                writeToScreen('CONNECTED');
                var data = {
        'method': 'get-config',
        'tvId': 'sdds'
    };
    
                doSend(data);
            }

            function onClose(evt)
            {
                writeToScreen('DISCONNECTED');
            }

            function onMessage(evt)
            {
                writeToScreen('<span style="color: blue">RESPONSE: ' + evt.data+'</span>');
                websocket.close();
            }

            function onError(evt)
            {
                writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data);
            }

            function doSend(message)
            {
                writeToScreen('SENT:' + JSON.stringify(message)); 
                websocket.send(JSON.stringify(message));
            }

            function writeToScreen(message)
            {
                var pre = document.createElement('p');
                pre.style.wordWrap = 'break-word';
                pre.innerHTML = message;
                output.appendChild(pre);
            }

            window.addEventListener('load', init, false);
        </script>
    </head>
    <body>
        <div id="output"></div>
    </body>
</html>
